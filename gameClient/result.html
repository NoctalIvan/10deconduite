<!DOCTYPE html>
<html>
  <head>
    <title>10 de Conduite - Filiski 4 Renault</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="3rd/materialize.min.css"  media="screen,projection"/>
    
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <style>
      .grosRond {
        width: 50vw;
        height: 50vw;
      }

      .grosRond + div {
        position: absolute;
        top: 70px;
        left: 0;
        width: 100%;
        font-size: 110px;
        text-align: center;
        color: #5a5a5a;
      }

      .ptitIcon {
        width:42px; 
        position: absolute;
        right: 8px;
        top: 8px;
      }
    </style>
  </head>

  <body>
    <nav>
      <div class="nav-wrapper">
        <a href="#" class="brand-logo">Dashboard</a>
        <img src="https://i1.wp.com/www.winhelponline.com/blog/wp-content/uploads/2017/12/user.png?fit=256%2C256&quality=100" class="ptitIcon" />
      </div>
    </nav>
    
    <br/>
    <div class="container" style="position: relative; min-height: 324px">
      <canvas id="grosRond" class="grosRond valign-wrapper center-align"></canvas>
      <div>8.4/10</div>
    </div>
    <br/>

    <div id="cepabien" class="row container">

    </div>

    <a class="btn" style="text-align: center; display: block; margin: 0 20%" href="/">Rejouer</a>

    <br/>
            
    
    <!--JavaScript at end of body for optimized loading-->
    <script type="text/javascript" src="3rd/materialize.min.js"></script>
    <script src="3rd/Chart.min.js"></script>

    <script>
      // Donut
      var ctx = document.getElementById('grosRond').getContext('2d');
      var score = 8.4
      var myDoughnutChart = new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: [
            'yellow',
            'gray'
          ],
          datasets: [{
            backgroundColor: [
              'yellow',
              'red'
            ],
            data: [score, 10-score],
          }]
        },
        options: {
          legend: {
            display: false
          },
          tooltips: {
              enabled: false
          }
        }
      });

      // tooltips
      const template = (a) => {
        return `<div class="card horizontal">
            <div class="card-image" style="width: 33%; padding: 1em">
              <img src="${a.icon}">
            </div>
            <div class="card-stacked">
              <div class="card-content">
                <p><strong>${a.name}</strong></p>
                <p style="font-size: 25px; text-align: right"> - ${a.points} pts</p>
              </div>
            </div>
          </div>`
      }

      const demoErrors = {
        accBande: {lost: 2},
        route: {lost: 2.156},
        lowSpeed: {lost: 2.1},
        highSpeed: {lost: 2.1},
        noBlink: {lost: 2.1},
        uselessBlink: {lost: 2.1},
        strongTurn: {lost: 2.1},
        strongBreak: {lost: 2.1},
        zone: {lost: 2.1},
      }

      const niceWarning = {
        accBande: "bande blanche",
        lowSpeed: "vitesse insuffisante",
        highSpeed: "vitesse trop élevée",
        noBlink: "clignottants manquants",
        uselessBlink: "clignottants obsolètes",
        strongTurn: "virage trop serré",
        strongBreak: "freinage trop fort",
        zone: "distances de sécurité",
        route: "hors route",
      }

      const errors = demoErrors

      let str = ''
      for(var key in errors){
        const error = errors[key]
        str += template({
          icon: 'http://www.hicom.fr/wp-content/uploads/2017/09/Logo_TV_2015.png',
          name: niceWarning[key],
          points: error.lost.toFixed(1),
        })
      }
      document.getElementById('cepabien').innerHTML = str
    </script>

  </body>
</html>